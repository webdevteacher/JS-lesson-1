<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Basic Bootstrap Template</title>
    <!-- Bootstrap CSS file -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
</head>
<body>

    <div id="elem">
        <div id="elem-content">
            element
        </div>
    </div>

    <ul>
        <li>Item1</li>
        <li>Item2</li>
    </ul>

    <ul>
        <li>SecondListeItem1</li>
        <li>SecondListItem2</li>
    </ul>

    <input type="button" value="click here" onclick="clickCounter()">
    <input type="button" id="btn1" value="Click me instead!">

    <button onclick="alert(this.innerHTML)">Click me</button>


    <script>
        // document.getElementById
        let elem = document.getElementById('elem');
        elem.style.background = 'red'

        //querySelectorAll
        // usage --> elem.querySelectorAll(css)
        let elements = document.querySelectorAll('ul > li:last-child'); // supports also :hover and :active 
        //example: document.querySelectorAll(':hover') 
        //this will return a collection with elements that the pointer is over now.
        for(let elem of elements){
            console.log(elem.innerHTML);
        }

        //querySelector
        //elem.querySelector(css) - returns only one element and the element is the first one it finds


        /* 
            ARROW FUNCTIONS
        */

        // let functionVariable = (arg1, arg2, .... , argN) => expression

        // this is the same as let functionVariable = function(arg1, arg2, ... , argN){ return expression;}

        let sum = (a, b) => a + b;

        /*
            let sum = function(a, b){
                return a+b
            }
        */
        
        let double = n => n * 2;

        console.log(double(10));

        //

        let sayHello = () => console.log("Hello!");
        sayHello();

        // a small example where it may be usefull

        //let age = prompt("Are you above the legal age?", 18);

        /*let welcome = (age < 18 ) ?
            () => alert('Not Allowed!') :
            () => alert("Welcome!");*/

        //check out lambdas functions in c++

        //welcome();

        let sum2 = (a, b) => { //you have to add the curly braces if you need a multiline arrow function
            let result = a+b;
            return result;
        };

        console.log(sum2(1,2));

        // EVENTS

        //MOST USEFULL DOM EVENTS ARE:
        //For mouse
            //click
            //contextmenu - right click of a mouse on an element
            //mouseover/ mouseout- when the mouse cursor comes over or leaves an element
            //mousedown/mouseup - when the mouse button is pressed/released over an element
            //mousemove

        //Keyboard
            //keydown
            //keyup

        //form elements
            //submit 
            //focus - when a user focuses on an element

        //Document
            //DOMContentLoaded - when the HTML is loaded and processed and the DOM is fully constructed

        //CSS
            //transitioned - when a CSS animation finishes


        //TO react to those events a assign a handler



        // HTML-attribute handler
        function clickCounter() {
            for(let i= 1; i <= 100; i++){
                alert("Click count: " + i);
            }
        }

        // DOM property type of handling events
        //on<event> --> elem.onclick

        /*btn1.onclick = function() {
            alert('Thank you for clicking me!');
        }

        btn1.onclick = sayHello; //replaces the previous handler*/


        // addEventListener - removeEventListener
        // element.addEventListener(event, handler, [options]);
            //event = name of the event
            //handler = function that acts as handler
            //options --> once - if true the listener will run only once
            //        --> passive - if true then the handler will not call preventDefault().
        
        // element.removeEventListener(event, handler, [options]);

        /*function handler1(){
            alert('Handler 1 here');
        }

        function handler2(){
            alert('Handler 2 here');
        }

        btn1.onclick = () => alert("hello");
        btn1.addEventListener("click", handler1);
        btn1.addEventListener("click", handler2);

        btn1.removeEventListener("click", handler1);*/


        // Event object
        /*btn1.onclick = function(event){
            //show event type, element and coordinates of the click
            alert(event.type + " at " + event.currentTarget);
            alert("Coordinates: " + event.clientX + ":" + event.clientY)
        }; */



        //handleEvent
        let obj = {
            handleEvent(event){
                alert(event.type + " at " + event.currentTarget);
            }
        };

        btn1.addEventListener('click', obj);

        // 3 ways to assign event handlers
        // 1) HTML attribute onclick=""
        // 2) DOM property elem.onclick = function
        // 3) elem.addEventListener(event, handler) - removeEventListener


        // LocalStorage
        // setItem(key,value) - store key/value pair
        // getItem(key) - get the value by key
        // removeItem(key) - remove the key with its value
        // clear() - deletes everything
        // key(index) - gets the key on a given position
        // length - the number of stored items

        localStorage.setItem('test', 1);

        //alert(localStorage.getItem('test'));

        localStorage.test2 = 2;
        //alert(localStorage.test);

        delete localStorage.test2;

        //localStorage.clear();

        // looping over items in localstorage
        // method 1
        for (let i = 0; i < localStorage.length; i++){
            let key = localStorage.key(i);
            alert("Key = " + key + " Value: " + localStorage.getItem(key));
        }

        //method 2
        for( let key in localStorage){
            alert(key + ":" + localStorage.getItem(key)); //shiws items and other built-in stuff
        }

        // both key and value must be strings, be careful when you get a value and you want to use it as a number
        // we can use JSON to store objects

        // there is a limit of 5MB.

        // there are localStorage events which can be triggered on setItem, removeItem, clear 

    </script>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>   
</body>
</html>